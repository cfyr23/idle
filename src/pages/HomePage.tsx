import { FC, useEffect, useState } from 'react'
import { Link } from 'react-router-dom'
import CanvasClick from '../components/CanvasClick';

interface IHomeProps{
    balance: number,
    setBalance: (num :number) => void,
    clickValue: number,
    totalClicked: number,
    setTotalClicked: (num: number) => void,
}

const HomePage: FC<IHomeProps> = ({balance, setBalance, clickValue, totalClicked, setTotalClicked}) => {
    const [position, setPosition] = useState({ x: 0, y: 0 });
    const [isCanvasShowed, setIsCanvasShowed] = useState<boolean>(false);
    const [isImageClicked, setIsImageClicked] = useState<boolean>(false);

    const handleImageClick = () => {
        setIsImageClicked(true);
        setIsCanvasShowed(true);
    }

    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
        setPosition({ x: e.clientX, y: e.clientY });
    };

    useEffect(() => {
        setTimeout(() => {
            setIsImageClicked(false)
        }, 50)
    }, [isImageClicked])

    useEffect(() => {
        setTimeout(() => {
            setIsCanvasShowed(false)
        }, 50)
    }, [isCanvasShowed])

    return (
        <div className='home'>
            <div className="home__top">
                <div className="home__balance">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_14_2379)">
                            <path d="M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z" fill="#FFAD38"/>
                            <path d="M24 45.3626C35.7982 45.3626 45.3626 35.7982 45.3626 24C45.3626 12.2017 35.7982 2.63733 24 2.63733C12.2017 2.63733 2.63733 12.2017 2.63733 24C2.63733 35.7982 12.2017 45.3626 24 45.3626Z" fill="#FFC066"/>
                            <path d="M8.63642 15.0461C8.4912 15.0461 8.34401 15.0061 8.21229 14.9222C7.84357 14.6876 7.73501 14.1986 7.96976 13.83C11.4851 8.3078 17.4777 5.01099 24 5.01099C30.5223 5.01099 36.5149 8.3077 40.0302 13.8299C40.2649 14.1985 40.1563 14.6875 39.7877 14.9221C39.419 15.157 38.9301 15.0482 38.6954 14.6796C35.4721 9.61617 29.9784 6.59339 24 6.59339C18.0215 6.59339 12.5279 9.61636 9.30457 14.6796C9.15382 14.9165 8.89789 15.0461 8.63642 15.0461Z" fill="#FD9A0C"/>
                            <path d="M20.3813 12.132H18.8462C18.4092 12.132 18.0549 12.4862 18.0549 12.9232C18.0549 13.3602 18.4092 13.7145 18.8462 13.7145H21.4363L20.3813 12.132Z" fill="#CA7B0A"/>
                            <path d="M29.1538 12.132H27.6187L26.5637 13.7144H29.1538C29.5908 13.7144 29.9451 13.3601 29.9451 12.9231C29.9451 12.4861 29.5908 12.132 29.1538 12.132Z" fill="#CA7B0A"/>
                            <path d="M33.0835 14.2551C31.209 14.2551 29.6895 15.7748 29.6895 17.6491H27.6187V12.1318H26.4423C25.7427 12.1318 25.1756 12.6989 25.1756 13.3986V17.649H24H22.8245V13.3986C22.8245 12.6989 22.2574 12.1318 21.5578 12.1318H20.3814V17.6491H18.3106C18.3106 15.7747 16.791 14.2551 14.9166 14.2551C13.0423 14.2551 11.5226 15.7748 11.5226 17.6491V30.562C15.1374 30.562 18.0937 27.7425 18.3124 24.1828C18.3124 24.1823 18.4934 24.1818 18.4934 24.1813H20.2999C20.2999 25.8524 21.2803 27.2792 22.6623 27.8495L19.6695 33.8939C19.6695 33.8939 21.4684 34.7077 24.0001 34.7077C26.5319 34.7077 28.3308 33.8939 28.3308 33.8939L25.338 27.8495C26.72 27.2792 27.7004 25.8523 27.7004 24.1813H29.5068C29.5068 24.1819 29.6878 24.1824 29.6878 24.1828C29.9065 27.7426 32.8627 30.562 36.4776 30.562V17.6491C36.4775 15.7747 34.9579 14.2551 33.0835 14.2551Z" fill="#FD9A0C"/>
                            <path d="M26.9011 42.6022H21.0989C20.6619 42.6022 20.3076 42.2479 20.3076 41.8109C20.3076 41.3739 20.6619 41.0197 21.0989 41.0197H26.9011C27.338 41.0197 27.6923 41.3739 27.6923 41.8109C27.6923 42.2479 27.338 42.6022 26.9011 42.6022Z" fill="#FD9A0C"/>
                            <path d="M29.8021 39.0506H18.1977C17.7608 39.0506 17.4065 38.6964 17.4065 38.2594C17.4065 37.8224 17.7608 37.4681 18.1977 37.4681H29.8021C30.2391 37.4681 30.5934 37.8224 30.5934 38.2594C30.5934 38.6964 30.2391 39.0506 29.8021 39.0506Z" fill="#FD9A0C"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_14_2379">
                                <rect width="48" height="48" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                    <p>{balance}</p>
                </div>
                <div className="home__boost">
                    
                </div>
            </div>
            <div 
                className={isImageClicked ? "home__coin clicked" : "home__coin"} 
                onClick={(e) => {
                    handleImageClick()
                    setBalance(balance + clickValue)
                    setTotalClicked(totalClicked + clickValue)
                    handleMouseMove(e)
                }}
            >
                <svg width="280" height="280" viewBox="0 0 280 280" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_14_2391)">
                        <path d="M140 280C217.32 280 280 217.32 280 140C280 62.6801 217.32 0 140 0C62.6801 0 0 62.6801 0 140C0 217.32 62.6801 280 140 280Z" fill="#FFAD38"/>
                        <path d="M140 264.615C208.823 264.615 264.615 208.823 264.615 140C264.615 71.1768 208.823 15.3846 140 15.3846C71.1768 15.3846 15.3846 71.1768 15.3846 140C15.3846 208.823 71.1768 264.615 140 264.615Z" fill="#FFC066"/>
                        <path d="M50.3792 87.769C49.5321 87.769 48.6735 87.536 47.9052 87.0466C45.7543 85.6777 45.121 82.8252 46.4904 80.6749C66.9966 48.4624 101.953 29.231 140 29.231C178.047 29.231 213.003 48.4618 233.51 80.6744C234.879 82.8247 234.245 85.6772 232.095 87.046C229.945 88.4159 227.093 87.7816 225.723 85.6313C206.921 56.0945 174.874 38.4617 140 38.4617C105.126 38.4617 73.0795 56.0956 54.2768 85.6313C53.3974 87.0132 51.9045 87.769 50.3792 87.769Z" fill="#FD9A0C"/>
                        <path d="M118.891 70.7694H109.936C107.387 70.7694 105.32 72.8361 105.32 75.385C105.32 77.934 107.387 80.0007 109.936 80.0007H125.045L118.891 70.7694Z" fill="#CA7B0A"/>
                        <path d="M170.064 70.7694H161.109L154.955 80.0001H170.064C172.613 80.0001 174.68 77.9335 174.68 75.3845C174.68 72.8355 172.613 70.7694 170.064 70.7694Z" fill="#CA7B0A"/>
                        <path d="M192.987 83.1545C182.053 83.1545 173.189 92.0194 173.189 102.953H161.109V70.7689H154.247C150.166 70.7689 146.858 74.077 146.858 78.1583V102.953H140H133.143V78.1583C133.143 74.077 129.835 70.7689 125.754 70.7689H118.892V102.953H106.812C106.812 92.0188 97.9475 83.1545 87.0138 83.1545C76.0802 83.1545 67.2153 92.0194 67.2153 102.953V178.278C88.3017 178.278 105.547 161.831 106.823 141.066C106.823 141.063 107.878 141.06 107.878 141.058H118.417C118.417 150.806 124.135 159.129 132.197 162.455L114.739 197.714C114.739 197.714 125.233 202.461 140.001 202.461C154.769 202.461 165.263 197.714 165.263 197.714L147.805 162.455C155.867 159.129 161.586 150.805 161.586 141.058H172.123C172.123 141.061 173.179 141.064 173.179 141.066C174.455 161.832 191.699 178.278 212.786 178.278V102.953C212.786 92.0188 203.922 83.1545 192.987 83.1545Z" fill="#FD9A0C"/>
                        <path d="M156.923 248.513H123.077C120.528 248.513 118.461 246.446 118.461 243.897C118.461 241.348 120.528 239.281 123.077 239.281H156.923C159.472 239.281 161.539 241.348 161.539 243.897C161.539 246.446 159.472 248.513 156.923 248.513Z" fill="#FD9A0C"/>
                        <path d="M173.846 227.795H106.154C103.605 227.795 101.538 225.729 101.538 223.18C101.538 220.631 103.605 218.564 106.154 218.564H173.846C176.395 218.564 178.462 220.631 178.462 223.18C178.462 225.729 176.395 227.795 173.846 227.795Z" fill="#FD9A0C"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_14_2391">
                            <rect width="280" height="280" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            </div>

            {/* canvas for click value */}
            {position.x && position.y && isCanvasShowed ? <CanvasClick x={position.x} y={position.y} click={clickValue} /> : null}

             <div className="nav">
                <Link to='/'>
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_14_1480)">
                        <path d="M8.49618 28.8273L7.48925 30.1236L6.41106 31.5123C6.29231 31.6658 6.14043 31.788 5.96993 31.872C5.80025 31.9551 5.61025 32.0001 5.416 32.0001C4.57787 32.0001 3.973 31.1976 4.20462 30.3917L5.04787 27.454L5.47881 25.9542L8.49618 28.8273Z" fill="#A67C52"/>
                        <path d="M28.0855 32C27.8903 32 27.702 31.955 27.5315 31.8719C27.361 31.7879 27.2091 31.6657 27.0895 31.5122L26.0113 30.1235L25.0044 28.8272L28.0218 25.954L28.4528 27.4538L29.2968 30.3915C29.5276 31.1975 28.9236 32 28.0855 32Z" fill="#A67C52"/>
                        <path d="M28.4528 27.4539C27.7546 28.4439 26.9335 29.3414 26.0113 30.1235L25.0044 28.8272L28.0218 25.954L28.4528 27.4539Z" fill="#936841"/>
                        <path d="M31.0639 17.5558C31.0639 25.4612 24.6557 31.8694 16.7503 31.8694C8.84483 31.8694 2.43665 25.4612 2.43665 17.5558C2.43665 16.0254 2.67671 14.5502 3.12296 13.1675C3.32996 12.5219 3.58277 11.8959 3.87627 11.2944H29.6243C29.9178 11.8959 30.1706 12.5219 30.3776 13.1675C30.8238 14.5502 31.0639 16.0254 31.0639 17.5558Z" fill="#A67C52"/>
                        <path d="M5.47867 25.9541L8.4961 28.8274L7.48917 30.1236C6.56704 29.3415 5.74585 28.4439 5.04773 27.454L5.47867 25.9541Z" fill="#936841"/>
                        <path d="M6.16933 17.5559C6.16933 15.3104 6.68596 13.1854 7.60889 11.2944H3.87633C2.95339 13.1853 2.43677 15.3104 2.43677 17.5559C2.43677 25.4613 8.84496 31.8695 16.7504 31.8695C17.383 31.8695 18.0058 31.828 18.6167 31.7484C11.5931 30.8339 6.16933 24.8287 6.16933 17.5559Z" fill="#936841"/>
                        <path d="M28.2543 8.24725C28.2543 6.90069 27.1628 5.80919 25.8162 5.80919C25.769 5.80919 25.7222 5.81087 25.6757 5.8135C25.6994 5.67719 25.7123 5.53719 25.7123 5.39419C25.7123 4.04763 24.6208 2.95613 23.2742 2.95613C23.0494 2.95613 22.832 2.98719 22.6253 3.04419C22.4159 1.9105 21.4229 1.05144 20.2285 1.05144C19.7637 1.05144 19.3292 1.18163 18.9595 1.4075C18.5712 0.57625 17.7282 0 16.75 0C15.7719 0 14.9289 0.57625 14.5404 1.40744C14.1707 1.18162 13.7363 1.05138 13.2714 1.05138C12.077 1.05138 11.084 1.91038 10.8746 3.04413C10.6679 2.98713 10.4504 2.95606 10.2257 2.95606C8.87911 2.95606 7.78761 4.04756 7.78761 5.39412C7.78761 5.53713 7.80061 5.67712 7.82423 5.81344C7.77767 5.81081 7.73092 5.80912 7.68367 5.80912C6.33711 5.80912 5.24561 6.90063 5.24561 8.24719" fill="#FDBB00"/>
                        <path d="M12.0102 5.80919C12.0574 5.80919 12.1042 5.81087 12.1507 5.8135C12.127 5.67719 12.1141 5.53731 12.1141 5.39419C12.1141 4.04775 13.2056 2.95613 14.5522 2.95613C14.777 2.95613 14.9945 2.98719 15.2011 3.04419C15.4105 1.9105 16.4035 1.05144 17.5979 1.05144C18.0627 1.05144 18.4972 1.18163 18.8669 1.4075C18.8813 1.37663 18.8975 1.34694 18.9132 1.31675C18.5072 0.535063 17.6919 0 16.75 0C15.7719 0 14.9289 0.576187 14.5404 1.40744C14.1707 1.18162 13.7363 1.05138 13.2714 1.05138C12.0771 1.05138 11.084 1.91038 10.8747 3.04413C10.6679 2.98713 10.4505 2.95606 10.2257 2.95606C8.87929 2.95606 7.78766 4.04756 7.78766 5.39412C7.78766 5.53713 7.80073 5.67712 7.82429 5.81344C7.77773 5.81081 7.73098 5.80912 7.68379 5.80912C6.33723 5.80912 5.24573 6.90063 5.24573 8.24719H9.57217C9.57217 6.90069 10.6637 5.80919 12.0102 5.80919Z" fill="#EDAB06"/>
                        <path d="M14.5598 6.52685C14.5598 5.4871 13.7169 4.64429 12.6772 4.64429C11.6376 4.64429 10.7947 5.48716 10.7947 6.52685" fill="#EDAB06"/>
                        <path d="M21.0549 5.35937C21.0549 4.31962 20.212 3.47681 19.1724 3.47681C18.1327 3.47681 17.2898 4.31968 17.2898 5.35937" fill="#EDAB06"/>
                        <path d="M25.5541 8.24731C25.5541 7.20756 24.7112 6.36475 23.6715 6.36475C22.6318 6.36475 21.7889 7.20762 21.7889 8.24731" fill="#EDAB06"/>
                        <path d="M8.21718 11.5133H4.03587C3.52012 11.5133 3.05349 11.3046 2.71587 10.967C2.37824 10.6293 2.16956 10.1628 2.16956 9.64695C2.16956 8.61626 3.00512 7.78064 4.03587 7.78064H9.53974H18.7016H29.4641C29.9791 7.78064 30.4456 7.98933 30.7841 8.32695C31.1217 8.66458 31.3304 9.13114 31.3304 9.64695C31.3304 10.6776 30.4949 11.5133 29.4641 11.5133H11.1015" fill="#A67C52"/>
                        <path d="M30.3776 13.1674H3.12292C3.32992 12.5218 3.58274 11.8957 3.87624 11.2943H29.6243C29.9178 11.8957 30.1706 12.5218 30.3776 13.1674Z" fill="#936841"/>
                        <path d="M7.25943 9.64695C7.25943 8.61626 8.09499 7.78064 9.12574 7.78064H4.03587C3.00518 7.78064 2.16956 8.6162 2.16956 9.64695C2.16956 10.1627 2.37824 10.6293 2.71587 10.967C3.05349 11.3046 3.52006 11.5133 4.03587 11.5133H8.21724H9.12581C8.61006 11.5133 8.14343 11.3046 7.80581 10.967C7.46812 10.6293 7.25943 10.1628 7.25943 9.64695Z" fill="#936841"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_14_1480">
                        <rect width="32" height="32" fill="white" transform="translate(0.75)"/>
                        </clipPath>
                        </defs>
                    </svg>
                    <p>Казна</p>
                </Link>
                <Link to='/secret'>
                    <img width="40" height="40" src="https://img.icons8.com/ios/50/anonymous-mask.png" alt="anonymous-mask"/>
                    <p>Битва</p>
                </Link>
                <Link to='/earn'>
                    <img width="40" height="40" src="https://img.icons8.com/officel/40/cheap-2.png" alt="cheap-2"/>
                    <p>Клады</p>
                </Link>
                <Link to='/boosts'>
                    <img width="40" height="40" src="https://img.icons8.com/external-goofy-color-kerismaker/96/external-Vodka-beverage-goofy-color-kerismaker.png" alt="external-Vodka-beverage-goofy-color-kerismaker"/>
                    <p>Други</p>
                </Link>
            </div>
            
        </div>
       
    )
}

export default HomePage
